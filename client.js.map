{"mappings":"A,C,KEAO,IAAM,EAAiB,OAAO,UAAU,CAAC,gCAAgC,OAAO,CACnF,cACA,eDCE,EAAM,IAAI,IAAI,SAAS,IAAI,EAE3B,EAAU,EAAI,YAAY,CAAC,GAAG,CAAC,cACjC,IACF,aAAa,OAAO,CAAC,qBAAsB,GAC3C,EAAI,YAAY,CAAC,MAAM,CAAC,cACxB,QAAQ,YAAY,CAAC,KAAA,EAAW,SAAS,KAAK,CAAE,EAAI,IAAI,GAG1D,IAAI,EAAS,SAAS,aAAkC,AACzC,MAAA,IAAX,GAGF,CAAA,EAAS,SAAS,aAAa,CAAC,8FAHlC,EAOA,IAAM,EAAgC,CAAA,EACtC,IAAK,IAAI,EAAI,EAAG,EAAI,EAAO,UAAU,CAAC,MAAM,CAAE,IAAK,CACjD,IAAM,EAAY,EAAO,UAAU,CAAC,IAAI,CAAC,EACzC,CAAA,CAAK,CAAC,EAAU,IAAI,CAAC,OAAO,CAAC,SAAU,IAAI,CAAG,EAAU,KAAK,AAC9D,CCpB+B,2BDqB5B,EAAM,KAAK,EACb,CAAA,EAAM,KAAK,CAAG,CAAA,EAIhB,IAAM,EAAgB,SAAS,aAAa,CAAC,wBAC7C,CAAA,EAAM,GAAG,CAAG,EAAgB,EAAc,IAAI,CAAG,EAAI,MAAM,CAAG,EAAI,QAAQ,CAAG,EAAI,MAAM,CACvF,EAAM,MAAM,CAAG,EAAI,MAAM,CACzB,EAAM,QAAQ,CAAG,EAAI,QAAQ,CAAC,MAAM,CAAG,EAAI,QAAU,EAAI,QAAQ,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,SAAU,IAC9F,EAAM,KAAK,CAAG,SAAS,KAAK,CAC5B,IAAM,EAAkB,SAAS,aAAa,CAAC,2BAC/C,CAAA,EAAM,WAAW,CAAG,EAAkB,EAAgB,OAAO,CAAG,GAEhE,IAAM,EAAM,mBAAmB,EAAM,WAAW,EAAE,MAAM,CACpD,EAAM,KACR,CAAA,EAAM,WAAW,CAAG,EAAM,WAAW,CAAC,MAAM,CAAC,EAAG,KAAK,KAAK,CAAC,AAA2B,IAA3B,EAAM,WAAW,CAAC,MAAM,CAAU,GAD/F,EAGA,IAAM,EAAc,SAAS,aAAa,CAAC,kDAC3C,CAAA,CAAK,CAAC,WAAW,CAAG,EAAc,EAAY,OAAO,CAAG,GACxD,EAAM,OAAO,CAAG,GAAW,aAAa,OAAO,CAAC,uBAAyB,GAKzE,SAAS,IAAI,CAAC,kBAAkB,CAC9B,aACA,CAFF;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;AAsBW,UAAA,CAAA,EAGX,IAAM,EAAmB,EAAO,GAAG,CAAC,KAAK,CAAC,iDAAkD,CAAC,EAAE,CACzF,EAAW,CAAA,EAAG,EAAgB,gBAAA,CAAkB,CACtD,EAAO,kBAAkB,CACvB,WACA,CAFF;AAG4E,0EAAA,EAAA,EAAQ,CAAA,EAAI,IAAI,gBAAgB,GAAhC;AACnE,QAAA,CAAA,EACT,IAAM,EAAY,EAAO,kBAAoC,CAC7D,EAAO,aAAc,CAAC,WAAW,CAAC,GAGlC,iBAAiB,UAAW,AAAA,IAC1B,GAAI,EAAM,MAAM,GAAK,EACnB,OAEF,IAAM,EAAO,EAAM,IAAqB,CACpC,GAAQ,AAAc,WAAd,EAAK,IAAI,EAAiB,EAAK,MAAM,EAC/C,CAAA,EAAU,KAAK,CAAC,MAAM,CAAG,CAAA,EAAG,EAAK,MAAM,CAAA,EAAA,CAAI,AAAJ,CAE3C,E,C","sources":["<anon>","src/client.ts","src/preferred-theme.ts"],"sourcesContent":["(() => {\nconst $d7616cc977854c9a$export$62cdbe59b53bcfdb = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'github-dark' : 'github-light';\nconst $d7616cc977854c9a$export$fc9ac0b85d208db2 = 'preferred-color-scheme';\n\n\nconst $e5620cd4ca038e6a$var$url = new URL(location.href);\nconst $e5620cd4ca038e6a$var$session = $e5620cd4ca038e6a$var$url.searchParams.get('utterances');\nif ($e5620cd4ca038e6a$var$session) {\n    localStorage.setItem('utterances-session', $e5620cd4ca038e6a$var$session);\n    $e5620cd4ca038e6a$var$url.searchParams.delete('utterances');\n    history.replaceState(undefined, document.title, $e5620cd4ca038e6a$var$url.href);\n}\nlet $e5620cd4ca038e6a$var$script = document.currentScript;\nif ($e5620cd4ca038e6a$var$script === undefined) $e5620cd4ca038e6a$var$script = document.querySelector('script[src^=\"https://utteranc.es/client.js\"],script[src^=\"http://localhost:4000/client.js\"]');\nconst $e5620cd4ca038e6a$var$attrs = {};\nfor(let i = 0; i < $e5620cd4ca038e6a$var$script.attributes.length; i++){\n    const attribute = $e5620cd4ca038e6a$var$script.attributes.item(i);\n    $e5620cd4ca038e6a$var$attrs[attribute.name.replace(/^data-/, '')] = attribute.value;\n}\nif ($e5620cd4ca038e6a$var$attrs.theme === (0, $d7616cc977854c9a$export$fc9ac0b85d208db2)) $e5620cd4ca038e6a$var$attrs.theme = (0, $d7616cc977854c9a$export$62cdbe59b53bcfdb);\nconst $e5620cd4ca038e6a$var$canonicalLink = document.querySelector(`link[rel='canonical']`);\n$e5620cd4ca038e6a$var$attrs.url = $e5620cd4ca038e6a$var$canonicalLink ? $e5620cd4ca038e6a$var$canonicalLink.href : $e5620cd4ca038e6a$var$url.origin + $e5620cd4ca038e6a$var$url.pathname + $e5620cd4ca038e6a$var$url.search;\n$e5620cd4ca038e6a$var$attrs.origin = $e5620cd4ca038e6a$var$url.origin;\n$e5620cd4ca038e6a$var$attrs.pathname = $e5620cd4ca038e6a$var$url.pathname.length < 2 ? 'index' : $e5620cd4ca038e6a$var$url.pathname.substr(1).replace(/\\.\\w+$/, '');\n$e5620cd4ca038e6a$var$attrs.title = document.title;\nconst $e5620cd4ca038e6a$var$descriptionMeta = document.querySelector(`meta[name='description']`);\n$e5620cd4ca038e6a$var$attrs.description = $e5620cd4ca038e6a$var$descriptionMeta ? $e5620cd4ca038e6a$var$descriptionMeta.content : '';\nconst $e5620cd4ca038e6a$var$len = encodeURIComponent($e5620cd4ca038e6a$var$attrs.description).length;\nif ($e5620cd4ca038e6a$var$len > 1000) $e5620cd4ca038e6a$var$attrs.description = $e5620cd4ca038e6a$var$attrs.description.substr(0, Math.floor($e5620cd4ca038e6a$var$attrs.description.length * 1000 / $e5620cd4ca038e6a$var$len));\nconst $e5620cd4ca038e6a$var$ogtitleMeta = document.querySelector(`meta[property='og:title'],meta[name='og:title']`);\n$e5620cd4ca038e6a$var$attrs['og:title'] = $e5620cd4ca038e6a$var$ogtitleMeta ? $e5620cd4ca038e6a$var$ogtitleMeta.content : '';\n$e5620cd4ca038e6a$var$attrs.session = $e5620cd4ca038e6a$var$session || localStorage.getItem('utterances-session') || '';\ndocument.head.insertAdjacentHTML('afterbegin', `<style>\n    .utterances {\n      position: relative;\n      box-sizing: border-box;\n      width: 100%;\n      max-width: 760px;\n      margin-left: auto;\n      margin-right: auto;\n    }\n    .utterances-frame {\n      color-scheme: light;\n      position: absolute;\n      left: 0;\n      right: 0;\n      width: 1px;\n      min-width: 100%;\n      max-width: 100%;\n      height: 100%;\n      border: 0;\n    }\n  </style>`);\nconst $e5620cd4ca038e6a$var$utterancesOrigin = $e5620cd4ca038e6a$var$script.src.match(/^https:\\/\\/utteranc\\.es|http:\\/\\/localhost:\\d+/)[0];\nconst $e5620cd4ca038e6a$var$frameUrl = `${$e5620cd4ca038e6a$var$utterancesOrigin}/utterances.html`;\n$e5620cd4ca038e6a$var$script.insertAdjacentHTML('afterend', `<div class=\"utterances\">\n    <iframe class=\"utterances-frame\" title=\"Comments\" scrolling=\"no\" src=\"${$e5620cd4ca038e6a$var$frameUrl}?${new URLSearchParams($e5620cd4ca038e6a$var$attrs)}\" loading=\"lazy\"></iframe>\n  </div>`);\nconst $e5620cd4ca038e6a$var$container = $e5620cd4ca038e6a$var$script.nextElementSibling;\n$e5620cd4ca038e6a$var$script.parentElement.removeChild($e5620cd4ca038e6a$var$script);\naddEventListener('message', (event)=>{\n    if (event.origin !== $e5620cd4ca038e6a$var$utterancesOrigin) return;\n    const data = event.data;\n    if (data && data.type === 'resize' && data.height) $e5620cd4ca038e6a$var$container.style.height = `${data.height}px`;\n});\n\n})();\n//# sourceMappingURL=client.js.map\n","import { ResizeMessage } from './measure';\nimport { preferredThemeId, preferredTheme } from './preferred-theme';\n\nconst url = new URL(location.href);\n// slice session from query string\nconst session = url.searchParams.get('utterances')\nif (session) {\n  localStorage.setItem('utterances-session', session);\n  url.searchParams.delete('utterances');\n  history.replaceState(undefined, document.title, url.href);\n}\n\nlet script = document.currentScript as HTMLScriptElement;\nif (script === undefined) {\n  // Internet Explorer :(\n  // tslint:disable-next-line:max-line-length\n  script = document.querySelector('script[src^=\"https://utteranc.es/client.js\"],script[src^=\"http://localhost:4000/client.js\"]') as HTMLScriptElement;\n}\n\n// gather script element's attributes\nconst attrs: Record<string, string> = {};\nfor (let i = 0; i < script.attributes.length; i++) {\n  const attribute = script.attributes.item(i)!;\n  attrs[attribute.name.replace(/^data-/, '')] = attribute.value; // permit using data-theme instead of theme.\n}\nif (attrs.theme === preferredThemeId) {\n  attrs.theme = preferredTheme;\n}\n\n// gather page attributes\nconst canonicalLink = document.querySelector(`link[rel='canonical']`) as HTMLLinkElement;\nattrs.url = canonicalLink ? canonicalLink.href : url.origin + url.pathname + url.search;\nattrs.origin = url.origin;\nattrs.pathname = url.pathname.length < 2 ? 'index' : url.pathname.substr(1).replace(/\\.\\w+$/, '');\nattrs.title = document.title;\nconst descriptionMeta = document.querySelector(`meta[name='description']`) as HTMLMetaElement;\nattrs.description = descriptionMeta ? descriptionMeta.content : '';\n// truncate descriptions that would trigger 414 \"URI Too Long\"\nconst len = encodeURIComponent(attrs.description).length;\nif (len > 1000) {\n  attrs.description = attrs.description.substr(0, Math.floor(attrs.description.length * 1000 / len));\n}\nconst ogtitleMeta = document.querySelector(`meta[property='og:title'],meta[name='og:title']`) as HTMLMetaElement;\nattrs['og:title'] = ogtitleMeta ? ogtitleMeta.content : '';\nattrs.session = session || localStorage.getItem('utterances-session') || '';\n\n// create the standard utterances styles and insert them at the beginning of the\n// <head> for easy overriding.\n// NOTE: the craziness with \"width\" is for mobile safari :(\ndocument.head.insertAdjacentHTML(\n  'afterbegin',\n  `<style>\n    .utterances {\n      position: relative;\n      box-sizing: border-box;\n      width: 100%;\n      max-width: 760px;\n      margin-left: auto;\n      margin-right: auto;\n    }\n    .utterances-frame {\n      color-scheme: light;\n      position: absolute;\n      left: 0;\n      right: 0;\n      width: 1px;\n      min-width: 100%;\n      max-width: 100%;\n      height: 100%;\n      border: 0;\n    }\n  </style>`);\n\n// create the comments iframe and it's responsive container\nconst utterancesOrigin = script.src.match(/^https:\\/\\/utteranc\\.es|http:\\/\\/localhost:\\d+/)![0];\nconst frameUrl = `${utterancesOrigin}/utterances.html`;\nscript.insertAdjacentHTML(\n  'afterend',\n  `<div class=\"utterances\">\n    <iframe class=\"utterances-frame\" title=\"Comments\" scrolling=\"no\" src=\"${frameUrl}?${new URLSearchParams(attrs)}\" loading=\"lazy\"></iframe>\n  </div>`);\nconst container = script.nextElementSibling as HTMLDivElement;\nscript.parentElement!.removeChild(script);\n\n// adjust the iframe's height when the height of it's content changes\naddEventListener('message', event => {\n  if (event.origin !== utterancesOrigin) {\n    return;\n  }\n  const data = event.data as ResizeMessage;\n  if (data && data.type === 'resize' && data.height) {\n    container.style.height = `${data.height}px`;\n  }\n});\n","export const preferredTheme = window.matchMedia('(prefers-color-scheme: dark)').matches\n  ? 'github-dark'\n  : 'github-light';\n\nexport const preferredThemeId = 'preferred-color-scheme';"],"names":["$d7616cc977854c9a$export$62cdbe59b53bcfdb","window","matchMedia","matches","$e5620cd4ca038e6a$var$url","URL","location","href","$e5620cd4ca038e6a$var$session","searchParams","get","localStorage","setItem","delete","history","replaceState","undefined","document","title","$e5620cd4ca038e6a$var$script","currentScript","querySelector","$e5620cd4ca038e6a$var$attrs","i","attributes","length","attribute","item","name","replace","value","theme","$e5620cd4ca038e6a$var$canonicalLink","url","origin","pathname","search","substr","$e5620cd4ca038e6a$var$descriptionMeta","description","content","$e5620cd4ca038e6a$var$len","encodeURIComponent","Math","floor","$e5620cd4ca038e6a$var$ogtitleMeta","session","getItem","head","insertAdjacentHTML","$e5620cd4ca038e6a$var$utterancesOrigin","src","match","$e5620cd4ca038e6a$var$frameUrl","URLSearchParams","$e5620cd4ca038e6a$var$container","nextElementSibling","parentElement","removeChild","addEventListener","event","data","type","height","style"],"version":3,"file":"client.js.map"}